import{l as P,b as L,d as h,r as a,j as e,a as p}from"./index.6a24e461.js";import{M as E,P as T,a as j,b as k,c as I,B as M}from"./index.esm.a9421b78.js";import{P as O}from"./Page.f6b9b33b.js";import{a as B}from"./TextInput.f7b047c8.js";const C=P(r=>({showLogin:!0,setShowLogin:c=>r(()=>({showLogin:c}))}));function U(){const r=L(),c=h(s=>s.user),f=h(s=>s.setUser),x=C(s=>s.setShowLogin),[l,b]=a.exports.useState(""),[S,d]=a.exports.useState(!0),[n,v]=a.exports.useState(""),[w,m]=a.exports.useState(!0),[g,u]=a.exports.useState(""),[y,o]=a.exports.useState(!1),N=async s=>{if(s.preventDefault(),o(!0),!/^\S+@\S+$/.test(l)&&n.length<8&&(d(!1),m(!1),o(!1)),!/^\S+@\S+$/.test(l)){d(!1),o(!1);return}if(n.length<8){m(!1),o(!1);return}try{const t=await fetch("http://localhost:8080/v1/auth/sign-in",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:n})}),i=await t.json();return t.status===200?(console.log(i),f(i.user),x(!1),localStorage.setItem("accessToken",i.accessToken),localStorage.setItem("refreshToken",i.refreshToken),r("/")):u(i.message)}catch(t){alert(t)}finally{o(!1)}};return a.exports.useEffect(()=>{c&&r("/")},[]),e(O,{children:e("div",{className:"grid place-items-center h-screen max-w-md mx-auto px-4",children:e("div",{className:"max-h-80 grid place-items-center w-full rounded-lg bg-primary shadow-sm",children:p("form",{onSubmit:N,className:"w-full px-8 py-8",children:[e(B,{className:"mb-2",label:"Email",type:"text",value:l,icon:e(E,{size:25}),radius:"sm",onChange:s=>{b(s.target.value),d(!0),u("")},placeholder:"john@example.com",error:!S&&"Please enter a valid email"}),e(T,{className:"mb-2",label:"Password",value:n,icon:e(j,{size:25}),radius:"sm",onChange:s=>{v(s.target.value),m(!0),u("")},placeholder:"Password",error:!w&&"Password must be at least 8 characters",visibilityToggleIcon:({reveal:s,size:t})=>s?e(k,{size:t}):e(I,{size:t})}),g&&e("p",{className:"text-xs text-rose-600 mb-1",children:g}),p("p",{className:"text-xs text-right",children:["Already have an account?",e("span",{className:"text-gray-500 cursor-pointer",onClick:()=>{r("/auth/register")},children:" Register"})]}),e("div",{className:"text-right mt-5",children:e(M,{className:"bg-red-600 border-2 border-red-600 hover:bg-primary  hover:text-red-600 transition-all",type:"submit",size:"xs",radius:"sm",loading:y,children:"submit"})}),e("div",{})]})})})})}export{U as default};
