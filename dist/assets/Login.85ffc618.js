import{p as P,b as L,d as h,r as a,j as e,a as p,s as T}from"./index.8f2de2cc.js";import{M as E,P as j,a as k,b as B,c as I}from"./index.esm.f3183d91.js";import{P as C}from"./Page.466a0aae.js";import{B as M}from"./index.esm.5f940dc4.js";import{T as O}from"./TextInput.92661991.js";import{B as V}from"./Button.02bea655.js";const $=P(r=>({showLogin:!0,setShowLogin:c=>r(()=>({showLogin:c}))}));function J(){const r=L(),c=h(s=>s.user),f=h(s=>s.setUser),x=$(s=>s.setShowLogin),[i,y]=a.exports.useState(""),[b,m]=a.exports.useState(!0),[l,v]=a.exports.useState(""),[S,d]=a.exports.useState(!0),[g,u]=a.exports.useState(""),[w,o]=a.exports.useState(!1),N=async s=>{if(s.preventDefault(),o(!0),!/^\S+@\S+$/.test(i)&&l.length<8&&(m(!1),d(!1),o(!1)),!/^\S+@\S+$/.test(i)){m(!1),o(!1);return}if(l.length<8){d(!1),o(!1);return}try{const t=await fetch("http://localhost:8080/v1/auth/sign-in",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:l})}),n=await t.json();return t.status===200?(f(n.user),x(!1),localStorage.setItem("accessToken",n.accessToken),localStorage.setItem("refreshToken",n.refreshToken),T({icon:e(M,{}),color:"green",title:"Good Day!",message:"You have successfully logged in to your account."}),r("/")):u(n.message)}catch(t){alert(t)}finally{o(!1)}};return a.exports.useEffect(()=>{c&&r("/")},[]),e(C,{children:e("div",{className:"grid place-items-center h-screen max-w-md mx-auto px-4",children:e("div",{className:"max-h-80 grid place-items-center w-full rounded-lg bg-primary shadow-sm",children:p("form",{onSubmit:N,className:"w-full px-8 py-8",children:[e(O,{className:"mb-2",label:"Email",type:"text",value:i,icon:e(E,{size:25}),radius:"sm",onChange:s=>{y(s.target.value),m(!0),u("")},placeholder:"john@example.com",error:!b&&"Please enter a valid email"}),e(j,{className:"mb-2",label:"Password",value:l,icon:e(k,{size:25}),radius:"sm",onChange:s=>{v(s.target.value),d(!0),u("")},placeholder:"Password",error:!S&&"Password must be at least 8 characters",visibilityToggleIcon:({reveal:s,size:t})=>s?e(B,{size:t}):e(I,{size:t})}),g&&e("p",{className:"text-xs text-rose-600 mb-1",children:g}),p("p",{className:"text-xs text-right",children:["Already have an account?",e("span",{className:"text-gray-500 cursor-pointer",onClick:()=>{r("/auth/register")},children:" Register"})]}),e("div",{className:"text-right mt-5",children:e(V,{className:"bg-red-600 border-2 border-red-600 hover:bg-primary  hover:text-red-600 transition-all",type:"submit",size:"xs",radius:"sm",loading:w,children:"submit"})}),e("div",{})]})})})})}export{J as default};
